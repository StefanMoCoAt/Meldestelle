# ===================================================================
# Keycloak Profile Configuration
# ===================================================================
# Dieses Profil konfiguriert die OAuth2/JWT-Authentifizierung mit Keycloak.
# Verwendet Spring Security's oauth2ResourceServer zur JWT-Validierung.
# ===================================================================

spring:
  security:
    oauth2:
      resourceserver:
        jwt:
          # Issuer-URI für die JWT-Validierung
          # Docker intern: http://keycloak:8080/realms/meldestelle
          # Extern: http://localhost:8180/realms/meldestelle
          issuer-uri: ${KEYCLOAK_ISSUER_URI:http://localhost:8180/realms/meldestelle}
          # JWK-Set-URI zum Abrufen öffentlicher Schlüssel
          jwk-set-uri: ${KEYCLOAK_JWK_SET_URI:http://localhost:8180/realms/meldestelle/protocol/openid-connect/certs}

# Custom Keycloak-Konfiguration (für eigene Services falls benötigt)
app:
  keycloak:
    server-url: ${KEYCLOAK_SERVER_URL:http://localhost:8180}
    realm: ${KEYCLOAK_REALM:meldestelle}
    client-id: ${KEYCLOAK_CLIENT_ID:api-gateway}
