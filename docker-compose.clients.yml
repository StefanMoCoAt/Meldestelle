# ===================================================================
# Docker Compose - Client Applications
# Generated from docker/versions.toml
# Environment: development
# Generated: 2025-10-25 23:26:24 UTC
# ===================================================================

services:
  # ===================================================================
  # Web Application (Compose for Web)
  # ===================================================================
  web-app:
    build:
      context: .
      dockerfile: dockerfiles/clients/web-app/Dockerfile
      args:
        # Global build arguments (centralized DOCKER_* variables)
        GRADLE_VERSION: ${DOCKER_GRADLE_VERSION}
        JAVA_VERSION: ${DOCKER_JAVA_VERSION}
        BUILD_DATE: ${BUILD_DATE}
        VERSION: ${DOCKER_APP_VERSION}
        # Client-specific arguments (centralized DOCKER_* variables)
        NODE_VERSION: ${DOCKER_NODE_VERSION}
        NGINX_VERSION: ${DOCKER_NGINX_VERSION}
        # Application-specific arguments
        CLIENT_PATH: client
        CLIENT_MODULE: client
        CLIENT_NAME: meldestelle-web-app
    container_name: meldestelle-web-app
    environment:
      NODE_ENV: ${NODE_ENV:-dev}
      API_BASE_URL: http://api-gateway:${GATEWAY_PORT:-8081}
      WS_URL: ws://api-gateway:${GATEWAY_PORT:-8081}/ws
      APP_TITLE: ${APP_NAME:-Meldestelle}
      APP_VERSION: ${APP_VERSION:-1.0.0}
    ports:
      - "4000:4000"
    networks:
      - meldestelle-network
    healthcheck:
      test: ["CMD", "curl", "--fail", "http://localhost:4000/health"]
      interval: 30s
      timeout: 5s
      retries: 3
      start_period: 40s
    restart: unless-stopped

# ===================================================================
# Networks (shared network from main compose file)
# ===================================================================
networks:
  meldestelle-network:
    driver: bridge
