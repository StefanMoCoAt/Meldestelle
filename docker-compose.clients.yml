# ===================================================================
# Docker Compose - Client Applications
# Generated from docker/versions.toml
# Environment: development
# Generated: 2025-11-11 23:07:01 UTC
# ===================================================================

services:
  # ===================================================================
  # Web Application (Compose for Web)
  # ===================================================================
  web-app:
    build:
      context: .
      dockerfile: dockerfiles/clients/web-app/Dockerfile
      args:
        # Global build arguments (build-time only)
        GRADLE_VERSION: 9.1.0
        JAVA_VERSION: 21
        BUILD_DATE: ${BUILD_DATE:-unknown}
        VERSION: 1.0.0
        # Client-specific image tag (build-time only)
        NGINX_IMAGE_TAG: 1.28.0-alpine
        # Application-specific arguments
        CLIENT_PATH: client
        CLIENT_MODULE: client
        CLIENT_NAME: meldestelle-web-app
    container_name: meldestelle-web-app
    env_file:
      - config/env/.env
    environment:
      NODE_ENV: ${NODE_ENV:-dev}
      API_BASE_URL: http://api-gateway:${GATEWAY_PORT:-8081}
      WS_URL: ws://api-gateway:${GATEWAY_PORT:-8081}/ws
      APP_TITLE: ${APP_NAME:-Meldestelle}
      APP_VERSION: ${VERSION:-1.0.0}
    ports:
      - "4000:4000"
    networks:
      - meldestelle-network
    healthcheck:
      test: ["CMD", "curl", "--fail", "http://localhost:4000/health"]
      interval: 30s
      timeout: 5s
      retries: 3
      start_period: 40s
    restart: unless-stopped

# ===================================================================
# Networks (shared network from main compose file)
# ===================================================================
networks:
  meldestelle-network:
    driver: bridge
